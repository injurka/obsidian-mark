CUBE CSS был создан [Энди Беллом](https://twitter.com/hankchizljaw) и представляет собой методологию CSS, ориентированную на простоту, прагматизм и последовательность.

CUBE означает «Исключение блока утилиты композиции» и представляет собой методологию, не зависящую от инструмента.

Суть методологии CUBE CSS заключается в том, что большая часть работы уже сделана за нас с помощью глобальных и высокоуровневых стилей. На этом этапе определены цвета, типографика и любые другие глобальные стили.

После определения глобальных стилей мы используем остальную часть методологии CUBE CSS для создания контекстных стилей, которые отличаются от глобальных стилей.

CUBE CSS следует нисходящему подходу к стилизации элементов и переходит от глобальных стилей к низкоуровневым и конкретным стилям.

По сути, CUBE CSS — это система/методология прогрессивного улучшения стилизации элементов.

---

## Layers

Структура состоит из следующих слоев слоев:

1. **Composition**: классы, которые смотрят на макроуровень приложения. Они предоставляют гибкие решения макета, общие для всего приложения.
2. **Utilities**: классы, которые выполняют одно задание и выполняют его хорошо. Часто это класс, изменяющий одно свойство. Но такие утилиты, как [`.click-area`,](https://github.com/kevtiq/feo-css/blob/main/src/utilities/click-area.scss) охватывают более одного свойства, но при этом делают только одно.
3. **Block**: соответствуют компонентам пользовательского интерфейса. То, что не может быть решено только с помощью классов компоновки и / или служебных программ, может быть решено блоками. Вы можете выбрать охват всех стилей компонента в блоке или поместить в блок только те стили, которые не охвачены другими классами.

### Composition

Уровень композиции отвечает за то, как движется страница и как различные элементы на странице соединяются и взаимодействуют друг с другом.

Уровень композиции занимается созданием гибких макетов, поддерживающих максимально возможное количество вариантов контента; он действует как скелет для других элементов на странице. Его не волнует, какой контент попадает на страницу, поскольку его единственная ответственность — это макет контента, а не сам контент.

Этот слой отвечает за:

- Обеспечение гибких макетов высокого уровня
- Определение того, как элементы взаимодействуют друг с другом
- Создание последовательного потока и ритма

Не следует:

- Обеспечьте визуальную обработку, такую ​​​​как цвета или стили шрифта.
- Обеспечьте декоративные стили, такие как тени и узоры.

### Utilities

Вспомогательный класс — это класс, который делает только одну вещь, но делает это очень хорошо. Это класс с одной ответственностью.

Классы служебных программ обычно ограничиваются одним свойством CSS. Они позволяют нам сохранять наши таблицы стилей CSS DRY и масштабируемыми.

Примеры утилит:

```css
btn-cta-secondary {
  background-color: red
}

margin-x-auto {
  margin-left: auto;
  margin-right: auto;
}
```

Класс утилиты меняет цвет фона кнопки на красный. Утилитный класс устанавливает горизонтальное поле элемента равным. `btn-cta-secondary` `margin-x-auto` `auto`

Что должны сделать коммунальные службы?

1. Примените одно свойство CSS или краткую группу связанных свойств для создания помощников многократного использования.
2. Расширьте дизайн-токены, чтобы поддерживать единый источник достоверной информации.
3. Уберите повторяемость из CSS и вместо этого примените ее в HTML.

Чего не следует делать коммунальным службам?

1. Определите большую группу несвязанных свойств CSS. Например, утилита, определяющая `color`, `font-size`и `padding`имеет смысл быть [блоком](https://cube.fyi/block) .
2. Может использоваться в качестве специального хака. Например, установка всех свойств с помощью `!important`несомненно вызовет проблемы в долгосрочной перспективе.


### Block

Блок — это скелетный компонент или организационная структура. Если сравнить его с обычными элементами пользовательского интерфейса: это элемент карточки или элемент кнопки.

Блок является скелетным, потому что к тому времени, когда вы доберетесь до уровня блока в CUBE CSS, **большая часть работы уже будет выполнена** глобальными слоями CSS , композиции и утилит.

Это означает, что роль блока не столько похожа на БЭМ, где _все_ стилизовано внутри блока, а вместо этого представляет собой механизм, работающий вразрез с глобальными слоями CSS, композиции и утили. Это создает легкую, но **конкретную группу правил** , которые **применяются только в этом контексте** .

 Что должен делать блок?

1. Расширьте работу, уже проделанную глобальными слоями CSS , композиции и утилит.
2. Примените коллекцию жетонов дизайна в небольшой группе.
3. Создайте пространство имен или усиление специфичности для управления конкретным контекстом.

Чего не должен делать блок?

1. Вырастите до чего-то большего, чем несколько правил CSS (максимум 80–100 строк).
2. Решите более одной контекстуальной проблемы. Например: стилизация карточки и кнопки в одном файле

---


---
## Exception

Последняя часть CSS CUBE — исключения. Исключением является отклонение от правил, изложенных в блоке.

Обычно исключение связано с **изменением состояния** . Например: у вас может быть «перевернутое» или «неактивное» состояние.

Давайте использовать карту в качестве примера. По умолчанию карта выглядит так:

![[cube_exception_1.png]]

Элемент карты стандартного издания с изображением вверху.

Мы добавляем исключение, используя такой атрибут данных:

```html
<article class="card" data-state="reversed"></article>
```

Это обеспечивает полезную возможность как для CSS, **так и** для JavaScript. Вы можете применить исключение в CSS следующим образом:

```css
.card[data-state='reversed'] {
  display: flex;
  flex-direction: column-reverse;
}
```

Результат в конечном итоге выглядит следующим образом:

![[cube_exception_2.png]]

### Почему атрибуты данных?

Мы используем атрибуты данных, потому что исключение должно возникать только в **исключительных обстоятельствах** (подсказка кроется в названии). Поскольку исключение часто вызвано внешним влиянием, например JavaScript, механизм, который могут эффективно использовать **как CSS, так и JavaScript,** также имеет смысл. Также полезно рассматривать исключения в контексте конечного [автомата. (открывается в новом окне)](https://github.com/davidkpiano/xstate)слишком.

Целью большей части методологии CSS CUBE является **ясность** , и разделение исключений на атрибуты данных позволяет достичь именно этого.

### Что должно делать исключение?

1. Предоставьте краткий вариант блока
2. Используйте атрибуты данных

### Чего не должно делать исключение?

1. Измените блок до такой степени, что он станет неузнаваемым. Здесь должен быть создан новый блок
2. Используйте классы CSS

---

## Grouping


Отслеживание нескольких классов в HTML может оказаться затруднительным. Как нам запомнить, какой класс является композицией, блоком или утилитой?

CUBE CSS имеет механизм группировки, который мы можем использовать для группировки наших классов в зависимости от их назначения. Это облегчает их отслеживание, а также повышает опыт и производительность разработчиков.

Мы можем группировать классы, используя квадратные скобки, вот так:

```html
<article
  class="\[ card \] [ section box ] [ bg-base color-primary ]"
  data-state="reversed"
></article>
```

Мы также можем сгруппировать их с помощью каналов:

```html
<article
  class="card | section box | bg-base color-primary"
  data-state="reversed"
></article>
```

### Порядок группировки

Важно то, что связанные классы сгруппированы вместе, но рекомендуемый порядок следующий:

1. Класс первичного блока элемента
2. Любые последующие классы блоков
3. Стандартные классы полезности
4. Проектирование служебных классов токенов

### Это не обязательно должны быть квадратные скобки

Если вам не нравятся квадратные скобки, вы можете использовать вместо них что-то вроде труб:

```html
<article
  class="card | section box | bg-base color-primary"
  data-state="reversed"
></article>
```

### Последовательность – это цель

Независимо от того, выбираете ли вы квадратные скобки, трубы или даже единорогов: приоритетом является последовательность и простота чтения.

HTML и CSS поддерживают большинство вариантов, поэтому целью группировки является поиск баланса между опытом разработчика и общением в команде.

---

## Источники
- #### [cube](https://cube.fyi/)
- #### [logrocket](https://blog.logrocket.com/cube-css-alternative-css-methodology/)