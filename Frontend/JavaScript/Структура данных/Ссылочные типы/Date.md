---
tags:
  - js
keywords:
  - date
  - js-type
title: Тип Date в ECMAScript
---
Тип **Date** в ECMAScript основан на ранней версии `java.util.Date`. Даты хранятся в нем как количество миллисекунд, прошедших с полуночи 1 января 1970 г., согласно универсальному временному коду (UTC). Благодаря такому формату с помощью типа Date можно точно представлять даты, отстоящие от 1 января 1970 г. на 285 616 лет.

## Создание Объекта Date

Чтобы создать объект Date, используйте оператор `new` с конструктором `Date`:

```javascript
let now = new Date();
```

Если конструктор `Date` вызывается без аргументов, создается объект с текущими значениями даты и времени. Чтобы создать объект Date с другой датой или временем, нужно передать в конструктор значение даты в миллисекундах, прошедших с полуночи 1 января 1970 г. эпохи Unix, согласно UTC. Чтобы упростить решение этой задачи, можно использовать методы `Date.parse()` и `Date.UTC()`.

### Метод Date.parse()

Метод `Date.parse()` принимает строковое представление даты и пытается преобразовать его в дату в миллисекундах. В пятой редакции ECMA-262 сказано, что метод `Date.parse()` должен поддерживать следующие форматы данных:

- Месяц/День/Год (например, `5/23/2019`)
- Название_Месяца День, Год (например, `May 23, 2019`)
- День_Недели Название_Месяца День Год Часы:Минуты:Секунды Часовой_Пояс (например, `Tue May 23 2019 00:00:00 GMT-0700`)
- ГГГГ-ММ-ДДTЧЧ:мм:сс.сссZ (например, `2019-05-23T00:00:00`) — этот расширенный формат ISO 8601 работает только в реализациях, совместимых с ECMAScript 5.

Например, создать объект Date для 23 мая 2019 г. можно следующим образом:

```javascript
let someDate = new Date(Date.parse("May 23, 2019"));
```

Если строка, переданная в метод `Date.parse()`, не представляет дату, он возвращает значение `NaN`. Если строка даты передается непосредственно в конструктор `Date`, он неявно вызывает метод `Date.parse()`, поэтому приведенный пример можно переписать так:

```javascript
let someDate = new Date("May 23, 2019");
```

Эта инструкция идентична предыдущей.

> [!WARN] Примечание 

> Реализации типа **Date** в разных браузерах имеют много особенностей. Часто значения дат, не попадающие в допустимые диапазоны, заменяются правильными аналогами. Например, некоторые браузеры интерпретируют строку «January 32, 2019» как «February 1, 2019». Однако, браузер **Opera** обычно подставляет текущий день текущего месяца, возвращая «January текущий_день, 2019». Так, при обработке указанной даты 21 сентября будет возвращена строка «January 21, 2019».

## Метод Date.UTC() и Локальное Время

Метод **Date.UTC()** возвращает представление даты в миллисекундах, но создает его на основе других данных. Аргументами `Date.UTC()` являются год, месяц с отсчетом от нуля (январь — 0, февраль — 1 и т. д.), день месяца (от 1 до 31), часы (от 0 до 23), минуты, секунды и миллисекунды. Обязательны только первые два аргумента (год и месяц). Если не указан день месяца, предполагается, что он равен 1, тогда как все остальные опущенные аргументы считаются равными 0.

### Примеры Использования Date.UTC()

```javascript
// 1 января 2000 г., полночь (GMT)
let y2k = new Date(Date.UTC(2000, 0));

// 5 мая 2005 г., 17:55:55 (GMT)
let allFives = new Date(Date.UTC(2005, 4, 5, 17, 55, 55));
```

В этих примерах создаются две даты. Первая — полночь по Гринвичу 1 января 2000 г., чему соответствуют год 2000 и месяц 0 (январь). Поскольку вместо остальных аргументов подставляются значения, предлагаемые по умолчанию (1 как день месяца и нули вместо всего остального), в результате получается полночь первого дня месяца. Вторая дата представляет 5 мая 2005 г., 17:55:55 по Гринвичу. Обратите внимание, что месяц задан числом 4, потому что месяцы отсчитываются от нуля.

### Конструктор Date с Локальным Временем

Конструктор `Date` поддерживает также формат метода `Date.UTC()`, но с одним важным отличием: он создает дату и время в локальном часовом поясе, а не по Гринвичу. Аргументы в него передаются такие же, что и в метод `Date.UTC()`. Если первым аргументом является число, конструктор `Date` предполагает, что это год даты, второй аргумент — месяц и т. д. Два предыдущих примера можно переписать следующим образом:

```javascript
// 1 января 2000 г., полночь по локальному времени
let y2k = new Date(2000, 0);

// 5 мая 2005 г., 17:55:55 по локальному времени
let allFives = new Date(2005, 4, 5, 17, 55, 55);
```

Здесь создаются те же даты, что и в предыдущих примерах, но на этот раз они относятся к локальному часовому поясу, заданному в системных параметрах.

### Метод Date.now()

В ECMAScript также предложен метод `Date.now()`, который возвращает дату и время его выполнения в миллисекундах. Это позволяет использовать объекты `Date` для профилирования кода:

```javascript
// получение времени начала
let start = Date.now();

// вызов функции
doSomething();

// получение времени окончания
let stop = Date.now(),
result = stop - start;
```

## Унаследованные методы типа `Date`

Как и другие ссылочные типы, тип `Date` переопределяет методы `toLocaleString()`, `toString()` и `valueOf()`, но у него эти методы возвращают разные значения.

### Метод `toLocaleString()`

Метод `toLocaleString()` типа `Date` возвращает дату и время в региональном формате, заданном для браузера. Например, формат может включать обозначение AM или PM для часов и не содержать никаких сведений о часовом поясе (точный формат зависит от браузера).

### Метод `toString()`

Метод `toString()` обычно возвращает дату и время со сведениями о часовом поясе, при этом время обычно указывается в 24-часовом формате (от 0 до 23).

#### Пример

> Для полуночи 1 февраля 2019 г. по стандартному тихоокеанскому времени в региональном формате «en-US»:

* `toLocaleString()` — *2/1/2019 12:00:00 AM*
* `toString()` — *Thu Feb 1 2019 00:00:00 GMT-0800 (Pacific Standard Time)*

Современные браузеры объединились для вывода одинаковых строк для этих двух методов. При использовании устаревших браузеров форматы значений, возвращаемых этими методами в разных браузерах, различаются. По этой причине методы `toLocaleString()` и `toString()` полезны только для отладки, но не для вывода данных.

### Метод `valueOf()`

Метод `valueOf()` в типе `Date` переопределен и возвращает не строку, а представление даты в миллисекундах, чтобы операторы (такие как «меньше» и «больше») правильно работали с датами.

#### Пример

```javascript
let date1 = new Date(2019, 0, 1); // 1 января 2019 г.
let date2 = new Date(2019, 1, 1); // 1 февраля 2019 г.

console.log(date1 < date2); // true
console.log(date1 > date2); // false
```

1 января 2019 г. наступило раньше, чем 1 февраля 2019 г., поэтому вполне можно сказать, что первая дата меньше второй. Поскольку в миллисекундах 1 января 2019 г. меньше, чем 1 февраля 2019 г., оператор «меньше» возвращает при их сравнении `true`, что позволяет легко упорядочивать даты.

## Методы для работы с компонентами даты/времени

Остальные методы типа `Date`, приведенные в таблице, получают и задают отдельные части даты и времени. Если в таблице упоминается стандарт UTC, это означает, что дата интерпретируется без смещения часового пояса (преобразуется в дату по Гринвичу).

### Таблица методов

| Метод                              | Описание                                                                                                                                                                                                        |
| ---------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `getTime()`                        | Возвращает представление даты в миллисекундах; то же, что и `valueOf()`                                                                                                                                         |
| `setTime(миллисекунды)`            | Задает представление даты в миллисекундах, изменяя тем самым всю дату                                                                                                                                           |
| `getFullYear()`                    | Возвращает четырехсимвольное значение года (например, 2019, а не просто 19)                                                                                                                                     |
| `getUTCFullYear()`                 | Возвращает четырехсимвольное значение года даты в формате UTC                                                                                                                                                   |
| `setFullYear(год)`                 | Задает год даты. Значение года должно содержать четыре цифры (например, 2019, а не просто 19)                                                                                                                   |
| `setUTCFullYear(год)`              | Задает год даты в формате UTC. Значение года должно содержать четыре цифры (например, 2019, а не просто 19)                                                                                                     |
| `getMonth()`                       | Возвращает месяц даты (0 представляет январь, а 11 — декабрь)                                                                                                                                                   |
| `getUTCMonth()`                    | Возвращает месяц даты в формате UTC (0 представляет январь, а 11 — декабрь)                                                                                                                                     |
| `setMonth(месяц)`                  | Задает месяц даты с отсчетом от 0. Указание числа больше 11 приводит к увеличению значения года                                                                                                                 |
| `setUTCMonth(месяц)`               | Задает месяц даты в формате UTC с отсчетом от 0. Указание числа больше 11 приводит к увеличению значения года                                                                                                   |
| `getDate()`                        | Возвращает день месяца даты (от 1 до 31)                                                                                                                                                                        |
| `getUTCDate()`                     | Возвращает день месяца даты в формате UTC (от 1 до 31)                                                                                                                                                          |
| `setDate(дата)`                    | Задает день месяца для даты. Если значение даты больше, чем количество дней в месяце, значение месяца увеличивается                                                                                             |
| `setUTCDate(дата)`                 | Задает день месяца для даты в формате UTC. Если значение даты больше, чем количество дней в месяце, значение месяца увеличивается                                                                               |
| `getDay()`                         | Возвращает день недели даты как число (0 представляет воскресенье, 6 — субботу)                                                                                                                                 |
| `getUTCDay()`                      | Возвращает день недели даты в формате UTC как число (0 представляет воскресенье, 6 — субботу)                                                                                                                   |
| `getHours()`                       | Возвращает час даты как число от 0 до 23                                                                                                                                                                        |
| `getUTCHours()`                    | Возвращает час даты в формате UTC как число от 0 до 23                                                                                                                                                          |
| `setHours(часы)`                   | Задает час даты. Указание числа больше 23 увеличивает значение дня месяца                                                                                                                                       |
| `setUTCHours(часы)`                | Задает час даты в формате UTC. Указание числа больше 23 увеличивает значение дня месяца                                                                                                                         |
| `getMinutes()`                     | Возвращает минуты даты как число от 0 до 59                                                                                                                                                                     |
| `getUTCMinutes()`                  | Возвращает минуты даты в формате UTC как число от 0 до 59                                                                                                                                                       |
| `setMinutes(минуты)`               | Задает минуты даты. Указание числа больше 59 увеличивает значение часа                                                                                                                                          |
| `setUTCMinutes(минуты)`            | Задает минуты даты в формате UTC. Указание числа больше 59 увеличивает значение часа                                                                                                                            |
| `getSeconds()`                     | Возвращает секунды даты как число от 0 до 59                                                                                                                                                                    |
| `getUTCSeconds()`                  | Возвращает секунды даты в формате UTC как число от 0 до 59                                                                                                                                                      |
| `setSeconds(секунды)`              | Задает секунды даты. Указание числа больше 59 увеличивает значение минут                                                                                                                                        |
| `setUTCSeconds(секунды)`           | Задает секунды даты в формате UTC. Указание числа больше 59 увеличивает значение минут                                                                                                                          |
| `getMilliseconds()`                | Возвращает миллисекунды даты                                                                                                                                                                                    |
| `getUTCMilliseconds()`             | Возвращает миллисекунды даты в формате UTC                                                                                                                                                                      |
| `setMilliseconds(миллисекунды)`    | Задает миллисекунды даты                                                                                                                                                                                        |
| `setUTCMilliseconds(миллисекунды)` | Задает миллисекунды даты в формате UTC                                                                                                                                                                          |
| `getTimeZoneOffset()`              | Возвращает количество минут, на которое локальный часовой пояс отстоит от UTC. Например, для восточного стандартного времени возвращается число 300. При переходе региона на летнее время это значение меняется |

## Источники
- #### Книга  `Фрисби М. Ф89	JavaScript для профессиональных веб-разработчиков. 4-е международное изд. — СПб.: Питер, 2022. — 1168 с.: ил. — (Серия «Для профессионалов»). ISBN 978-5-4461-1740-6`