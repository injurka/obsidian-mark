Диспетчеры событий такого типа - это как бы "губки" для сообщений. Они будут прослушивать любые сообщения, которые транслируются в эфир. Представьте себе, что эти диспетчеры событий - это жуткий парень в школе, который постоянно подслушивает разные разговоры. Хотите знать, какая девушка только что обожглась? Просто спросите этого жуткого парня. Вот изображение, которое лучше описывает, как работают диспетчеры событий с открытым ухом.

В примере будет объект Switch и объект Lamp. Когда мы нажимаем на переключатель, он отправляет сообщение, на которое Lamp (и другие объекты) могут реагировать. Каждый объект может реализовать функцию и выполнить свой код. Для краткости я приведу здесь только абстрактный код Lamp, из которого, я уверен, вы поймете суть.

## Настройка диспетчера событий

Давайте начнем с объекта Lamp. На левой боковой панели, под переменными, мы увидим список диспетчеров событий. Я создал два из них, которые называются Lightton и LightOFF. Нажмите на значок "плюс", чтобы создать свой собственный, и назовите их соответствующим образом.

![](https://www.versluis.com/wp-content/uploads/2020/08/image-8.png)

Теперь их можно перетащить в поле node и подключить к событию `BeginPlay`. Они ничего не будут делать, пока не будут вызваны явно, но их необходимо инициализировать, чтобы они стали активными.

![](https://www.versluis.com/wp-content/uploads/2020/08/image-9.png)

Подключите опцию назначить, чтобы создать два узла, один из которых может быть подключен к началу воспроизведения события, а другой может использоваться для определения того, что должно произойти при запуске события.

![](https://www.versluis.com/wp-content/uploads/2020/08/image-10.png)

В примере будет точечный световой объект, интенсивность которого я настрою так, чтобы он загорался. Ссылка на мой точечный световой объект (*Light*) взята из этого чертежа.

![](https://www.versluis.com/wp-content/uploads/2020/08/image-12.png)

Я подключу другое событие `LightOFF`, чтобы вернуть интенсивность к 0. Вот как это выглядит в контексте. Вы также можете добавить в цепочку несколько событий, которые пока ничего не делают. Все, что мы здесь делаем, - это информируем Blueprint о том, что может сработать в любой момент после запуска игры.

[![](https://www.versluis.com/wp-content/uploads/2020/08/image-11.png)](https://www.versluis.com/wp-content/uploads/2020/08/image-11.png)
## Запуск мероприятия с нашего выключателя освещения

В моем проекте "Выключатель света" мне понадобится общедоступная ссылка (переменная) на объект "Лампа". Создайте переменную, затем измените ее на тип вашего другого объекта в правом верхнем углу.

![](https://www.versluis.com/wp-content/uploads/2020/08/image-13.png)

Перетащите объект *Lamp* в редактор узлов, затем перетащите значок и найдите нужные события в списке (в моем случае `LightON` и `LightOFF`).

![](https://www.versluis.com/wp-content/uploads/2020/08/image-14.png)

Теперь мы можем подключить что-нибудь, что запустит событие (скажем, кнопку или изменение состояния). Когда это событие произойдет, наши функции в другом объекте запустятся. Я привязываю два моих события к состоянию логической переменной. Если он установлен, сработает индикатор. Если установлено, сработает `LightON`. Если нет, сработает `Light OFF`.

[![](https://www.versluis.com/wp-content/uploads/2020/08/image-15.png)](https://www.versluis.com/wp-content/uploads/2020/08/image-15.png)
## Источники
- #### [dev.epicgames](https://dev.epicgames.com/documentation/en-us/unreal-engine/blueprint-communications-in-unreal-engine)
- #### [versluis](https://www.versluis.com/2020/08/how-to-use-event-dispatchers-in-unreal-engine/)