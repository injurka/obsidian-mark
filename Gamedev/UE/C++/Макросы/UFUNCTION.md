Это макрос, используемый в Unreal Engine для обозначения функций, которые могут быть вызваны из Blueprints или других систем Unreal Engine. Этот макрос позволяет Unreal Engine управлять вызовами функций, обеспечивая их доступность в редакторе Blueprints, а также предоставляя дополнительные возможности, такие как сетевая синхронизация и оптимизация.

## Зачем нужен?

1. **Доступность в Blueprints**: Функции, помеченные `UFUNCTION`, могут быть вызваны из Blueprints, что делает их доступными для непрограммистов, таких как геймдизайнеры и художники.
    
2. **Сетевая синхронизация**: `UFUNCTION` позволяет указать, как функция должна обрабатываться в сетевой среде, например, как "Server", "Client", или "NetMulticast".
    
3. **Оптимизация**: Unreal Engine может оптимизировать вызовы функций, помеченных `UFUNCTION`, что может улучшить производительность.
    
4. **Интеграция с другими системами**: Функции, помеченные `UFUNCTION`, могут быть использованы в различных системах Unreal Engine, таких как делегаты (delegates) и события (events).

С помощью спецификаторов функций вы можете отображать функции в графиках визуальных сценариев Blueprint, которые позволяют разработчикам вызывать или расширять функции из ресурсов Blueprint без необходимости изменять код на C++.

*UFunctions* могут привязываться к делегатам в свойствах класса по умолчанию, позволяя им выполнять такие задачи, как связывание действий с пользовательскими вводимыми данными. Они также могут выполнять функцию сетевых обратных вызовов, что означает, что вы можете использовать их для получения уведомлений и запуска пользовательского кода всякий раз, когда сетевое обновление влияет на определенную переменную.

Вы даже можете создавать свои собственные консольные команды (часто называемые командами отладки, настройки или чит-кода), которые вы можете вызывать с игровой консоли в сборках для разработчиков, или добавлять кнопки с пользовательскими функциями к игровым объектам в редакторе уровней.

## Делегаты

Делегаты могут вызывать функции-члены объектов C++ универсальным, типобезопасным способом. Делегат может быть динамически привязан к функции-члену произвольного объекта, вызывая функцию объекта в будущем, даже если вызывающий объект не знает тип объекта.

## Таймеры

Таймеры определяют, какие действия должны выполняться с задержкой или в течение определенного периода времени. Например, вы можете захотеть сделать игрока неуязвимым после получения усиливающего предмета, а затем восстановить уязвимость через 10 секунд. Или вы можете захотеть наносить урон раз в секунду, пока игрок перемещается по комнате, наполненной токсичным газом. Таких действий можно добиться с помощью таймеров.

## Спецификаторы функций

При объявлении функций в объявление могут быть добавлены функциональные спецификаторы, чтобы контролировать, как функция ведет себя с различными аспектами движка и редактора.

| Спецификатор функции (Function Specifier)    | Эффект (Effect)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| :------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `BlueprintAuthorityOnly`                     | Эта функция будет выполняться только из кода Blueprint, если она запущена на машине с сетевым авторитетом (сервер, выделенный сервер или одиночная игра).                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `BlueprintCallable`                          | Функция может быть выполнена в графе Blueprint или Level Blueprint.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `BlueprintCosmetic`                          | Эта функция является косметической и не будет выполняться на выделенных серверах.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `BlueprintImplementableEvent`                | Функция может быть реализована в графе Blueprint или Level Blueprint.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `BlueprintNativeEvent`                       | Эта функция предназначена для переопределения в Blueprint, но также имеет реализацию по умолчанию на нативном уровне. Объявляет дополнительную функцию с тем же именем, но с добавлением `_Implementation` в конце, где должен быть написан код. Автоматически сгенерированный код будет вызывать метод `_Implementation`, если переопределение Blueprint не найдено.                                                                                                                                                                                                                                    |
| `BlueprintPure`                              | Функция не влияет на владеющий объект и может быть выполнена в графе Blueprint или Level Blueprint. По умолчанию функции, помеченные как const, будут предоставлены как чистые функции. Чтобы сделать const-функцию нечистой, можно объявить: `BlueprintPure=false`<br><br>```c++<br>UFUNCTION(BlueprintPure)<br>float  BlueprintPureFunction;<br>	 <br>UFUNCTION(BlueprintCallable)<br>float BlueprintCallableFunction<br>	 <br>UFUNCTION(BlueprintCallable)<br>int32 BlueprintCallableConstFunction() const<br>	 <br>UFUNCTION(BlueprintPure=fasle)<br>Int32 BlueprintPureFalseFunction() const<br>``` |
| `CallInEditor`                               | Эту функцию можно вызвать в редакторе на выбранных экземплярах через кнопку в панели "Details".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `Category = "TopCategory\|SubCategory\|Etc"` | Указывает категорию функции при отображении в инструментах редактирования Blueprint. Вложенные категории определяются с помощью оператора                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `Client`                                     | Функция выполняется только на клиенте, который владеет объектом, для которого вызывается функция. Объявляет дополнительную функцию с тем же именем, но с добавлением `_Implementation` в конце. Автоматически сгенерированный код будет вызывать метод `_Implementation` при необходимости.                                                                                                                                                                                                                                                                                                              |
| `CustomThunk`                                | Код генератора `UnrealHeaderTool` не будет производить тунк для этой функции; пользователь должен предоставить его с помощью макросов `DECLARE_FUNCTION` или `DEFINE_FUNCTION`.                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `Exec`                                       | Функция может быть выполнена из игрового консоли. Команды Exec работают только при объявлении в определенных классах.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `NetMulticast`                               | Функция выполняется как локально на сервере, так и реплицируется на всех клиентах, независимо от NetOwner объекта.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `Reliable`                                   | Функция реплицируется по сети и гарантированно доставляется независимо от пропускной способности или сетевых ошибок. Допустимо только при использовании вместе с *Client* или *Server*.                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `SealedEvent`                                | Эта функция не может быть переопределена в подклассах. Ключевое слово `SealedEvent` может использоваться только для событий. Для не-событийных функций объявите их как static или final, чтобы запечатать их.                                                                                                                                                                                                                                                                                                                                                                                            |
| `ServiceRequest`                             | Эта функция является RPC (удаленный вызов процедур) запросом службы. Это подразумевает `NetMulticast` и `Reliable`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `ServiceResponse`                            | Эта функция является RPC ответом службы. Это подразумевает `NetMulticast` и `Reliable`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `Server`                                     | Функция выполняется только на сервере. Объявляет дополнительную функцию с тем же именем, но с добавлением `_Implementation` в конце, где должен быть написан код. Автоматически сгенерированный код будет вызывать метод `_Implementation` при необходимости.                                                                                                                                                                                                                                                                                                                                            |
| `Unreliable`                                 | Функция реплицируется по сети, но может завершиться неудачей из-за ограничений пропускной способности или сетевых ошибок. Допустимо только при использовании вместе с *Client* или *Server*.                                                                                                                                                                                                                                                                                                                                                                                                             |
| `WithValidation`                             | Объявляет дополнительную функцию с тем же именем, но с добавлением `_Validate` в конце. Эта функция принимает те же параметры и возвращает bool, указывающий, должен ли выполняться вызов основной функции.                                                                                                                                                                                                                                                                                                                                                                                              |

## Спецификаторы метаданных

При объявлении классов, интерфейсов, структур, перечислений, значений перечислений, функций или свойств вы можете добавлять спецификаторы метаданных, чтобы управлять их взаимодействием с различными аспектами движка и редактора. Каждый тип структуры данных или элемента имеет свой собственный список спецификаторов метаданных.

> Метаданные существуют только в редакторе; не пишите логику игры, которая обращается к метаданным.

| Тег мета-функции (Function Meta Tag)                | Эффект (Effect)                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| :-------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `AdvancedDisplay="Parameter1, Parameter2, .."`      | Разделенный запятыми список параметров будет отображаться как расширенные пины (требующие раскрытия пользовательского интерфейса).                                                                                                                                                                                                                                                                                                                                  |
| `AdvancedDisplay=N`                                 | Замените N на число, и все параметры после N-го будут отображаться как расширенные пины (требующие раскрытия пользовательского интерфейса). Например, 'AdvancedDisplay=2' пометит все, кроме первых двух параметров, как расширенные).                                                                                                                                                                                                                              |
| `ArrayParm="Parameter1, Parameter2, .."`            | Указывает, что функция BlueprintCallable должна использовать узел Call Array Function, и что перечисленные параметры должны рассматриваться как массивы с подстановочными знаками.                                                                                                                                                                                                                                                                                  |
| `ArrayTypeDependentParams="Parameter"`              | При использовании ArrayParm этот спецификатор указывает один параметр, который будет определять типы всех параметров в списке ArrayParm.                                                                                                                                                                                                                                                                                                                            |
| `AutoCreateRefTerm="Parameter1, Parameter2, .."`    | Перечисленные параметры, хотя и передаются по ссылке, будут иметь автоматически созданное значение по умолчанию, если их пины останутся отключенными. Это удобная функция для Blueprints, часто используемая на пинах массивов.                                                                                                                                                                                                                                     |
| `BlueprintAutocast`                                 | Используется только статическими функциями BlueprintPure из библиотеки функций Blueprint. Узел приведения будет автоматически добавлен для типа возвращаемого значения и типа первого параметра функции.                                                                                                                                                                                                                                                            |
| `BlueprintInternalUseOnly`                          | Эта функция является внутренним детализацией реализации, используемой для реализации другой функции или узла. Она никогда не будет напрямую отображаться в графе Blueprint.                                                                                                                                                                                                                                                                                         |
| `BlueprintProtected`                                | Эта функция может быть вызвана только на владеющем объекте в Blueprint. Она не может быть вызвана на другом экземпляре.                                                                                                                                                                                                                                                                                                                                             |
| `CallableWithoutWorldContext`                       | Используется для функций BlueprintCallable, которые имеют пин WorldContext, чтобы указать, что функция может быть вызвана, даже если ее класс не реализует функцию GetWorld.                                                                                                                                                                                                                                                                                        |
| `CommutativeAssociativeBinaryOperator`              | Указывает, что функция BlueprintCallable должна использовать узел Commutative Associative Binary. Этот узел не имеет имен пинов, но имеет кнопку Add Pin, которая создает дополнительные входные пины.                                                                                                                                                                                                                                                              |
| `CompactNodeTitle="Name"`                           | Указывает, что функция BlueprintCallable должна отображаться в компактном режиме отображения, и предоставляет имя для отображения в этом режиме.                                                                                                                                                                                                                                                                                                                    |
| `CustomStructureParam="Parameter1, Parameter2, .."` | Перечисленные параметры рассматриваются как подстановочные знаки. Этот спецификатор требует спецификатор уровня UFUNCTION, CustomThunk, который потребует от пользователя предоставить пользовательскую функцию exec. В этой функции можно проверить типы параметров и выполнить соответствующие вызовы функций на основе этих типов параметров. Базовый UFUNCTION никогда не должен вызываться и должен утверждать или регистрировать ошибку, если это произойдет. |
| `DefaultToSelf`                                     | Для функций BlueprintCallable указывает, что значение по умолчанию свойства объекта должно быть контекстом self узла.                                                                                                                                                                                                                                                                                                                                               |
| `DeprecatedFunction`                                | Любые ссылки на эту функцию в Blueprint вызовут предупреждения компиляции, сообщающие пользователю, что функция устарела. Вы можете добавить к сообщению об устаревании (например, чтобы предоставить инструкции по замене устаревшей функции) с помощью спецификатор метаданных DeprecationMessage.                                                                                                                                                                |
| `DeprecationMessage="Message Text"`                 | Если функция устарела, это сообщение будет добавлено к стандартному предупреждению об устаревании при попытке скомпилировать Blueprint, который ее использует.                                                                                                                                                                                                                                                                                                      |
| `DeterminesOutputType="Parameter"`                  | Тип возвращаемого значения функции будет динамически изменяться в соответствии с вводом, подключенным к указанному параметру. Параметр должен быть шаблонным типом, таким как TSubClassOf<X> или TSoftObjectPtr<X>, где исходный тип возвращаемого значения функции — X* или контейнер с X* в качестве типа значения, например TArray<X*>.                                                                                                                          |
| `DevelopmentOnly`                                   | Функции, помеченные как DevelopmentOnly, будут выполняться только в режиме разработки. Это полезно для функциональности, такой как вывод отладочной информации, которая не должна существовать в поставляемых продуктах.                                                                                                                                                                                                                                            |
| `DisplayName="Blueprint Node Name"`                 | Имя этого узла в Blueprint будет заменено на предоставленное здесь значение вместо сгенерированного кодом имени.                                                                                                                                                                                                                                                                                                                                                    |
| `ExpandEnumAsExecs="Parameter"`                     | Для функций BlueprintCallable указывает, что для каждого элемента перечисления, используемого параметром, должен быть создан один входной пин выполнения. Параметр должен быть типа, перечисленного с тегом UENUM.                                                                                                                                                                                                                                                  |
| `ForceAsFunction`                                   | Преобразует BlueprintImplementableEvent без возвращаемого значения из события в функцию.                                                                                                                                                                                                                                                                                                                                                                            |
| `HidePin="Parameter"`                               | Для функций BlueprintCallable указывает, что пин параметра должен быть скрыт от пользовательского просмотра. Только один пин на функцию может быть скрыт таким образом.                                                                                                                                                                                                                                                                                             |
| `HideSelfPin`                                       | Скрывает пин "self", который указывает на объект, для которого вызывается функция. Пин "self" автоматически скрывается на функциях BlueprintPure, которые совместимы с классом вызывающего Blueprint. Функции, использующие мета-тег HideSelfPin, часто также используют спецификатор DefaultToSelf.                                                                                                                                                                |
| `InternalUseParam="Parameter"`                      | Аналогично HidePin, это скрывает пин именованного параметра от пользовательского просмотра и может использоваться только для одного параметра на функцию.                                                                                                                                                                                                                                                                                                           |
| `KeyWords="Set Of Keywords"`                        | Указывает набор ключевых слов, которые можно использовать при поиске этой функции, например, при размещении узла для вызова функции в графе Blueprint.                                                                                                                                                                                                                                                                                                              |
| `Latent`                                            | Указывает на латентное действие. Латентные действия имеют один параметр типа FLatentActionInfo, и этот параметр называется спецификатор LatentInfo.                                                                                                                                                                                                                                                                                                                 |
| `LatentInfo="Parameter"`                            | Для латентных функций BlueprintCallable указывает, какой параметр является параметром LatentInfo.                                                                                                                                                                                                                                                                                                                                                                   |
| `MaterialParameterCollectionFunction`               | Для функций BlueprintCallable указывает, что должен использоваться узел переопределения материала.                                                                                                                                                                                                                                                                                                                                                                  |
| `NativeBreakFunc`                                   | Для функций BlueprintCallable указывает, что функция должна отображаться так же, как стандартный узел Break Struct.                                                                                                                                                                                                                                                                                                                                                 |
| `NotBlueprintThreadSafe`                            | Допустимо только в библиотеках функций Blueprint. Эта функция будет рассматриваться как исключение из общего метаданных BlueprintThreadSafe, принадлежащего классу.                                                                                                                                                                                                                                                                                                 |
| `ShortToolTip="Short tooltip"`                      | Короткое всплывающее подсказка, используемое в некоторых контекстах, где полная подсказка может быть слишком объемной, например, в диалоге выбора родительского класса.                                                                                                                                                                                                                                                                                             |
| `ToolTip="Hand-written tooltip"`                    | Переопределяет автоматически сгенерированную подсказку из комментариев к коду.                                                                                                                                                                                                                                                                                                                                                                                      |
| `UnsafeDuringActorConstruction`                     | Эта функция небезопасна для вызова во время конструирования Actor.                                                                                                                                                                                                                                                                                                                                                                                                  |
| `WorldContext="Parameter"`                          | Используется функциями BlueprintCallable для указания того, какой параметр определяет мир, в котором происходит операция.                                                                                                                                                                                                                                                                                                                                           |
| `ScriptName="DisplayName"`                          | Имя, используемое для этого класса, свойства или функции при экспорте в язык сценариев. Вы можете включить устаревшие имена как дополнительные записи, разделенные точкой с запятой.                                                                                                                                                                                                                                                                                |

## Источники
- #### [dev.epicgames](https://dev.epicgames.com/documentation/en-us/unreal-engine/ufunctions-in-unreal-engine?application_version=5.4)