
Паттерн "Абстрактная фабрика" (Abstract Factory) предоставляет интерфейс для создания семейств взаимосвязанных объектов с определенными интерфейсами без указания конкретных типов данных объектов.

### Когда использовать?

- Когда система не должна зависеть от способа создания и компоновки новых объектов

- Когда создаваемые объекты должны использоваться вместе и являются взаимосвязанными


---

Паттерн "Абстрактная фабрика" предоставляет интерфейс категории связанных или взаимозависимых объектов без определения их конкретных свойств (классов).

В паттерне "Фабрика" конкретная фабрика отвечает за производство конкретных продуктов, каждая конкретная фабрика соответствует определенному продукту, и метод каждой фабрики уникален. Как правило, в конкретной фабрике существует только один метод для создания объектов или группа перезагружаемых (overloaded) методов, но они предназначены только для этой фабрики. Однако нам может потребоваться фабрика, способная производить не один, а несколько похожих продуктов.

![Alt text](./assets/Абстрактная%20фабрика%20~%20Abstract%20Factory%201.png)

На приведенном изображении смоделирован процесс покупки автомобиля пользователем. `Bytefer` заказал `SuperX01` на заводе `SuperX`. Завод изготовил его по модели, соответствующей `SuperX01`, и доставил `Bytefer`. `Chris1993` заказал `SuperX02` на той же фабрике `SuperX`. Тот же завод изготовил его по образцу, соответствующему `SuperX02`, и доставил `Chris1993`.

Посмотрим, как использовать "Абстрактную фабрику" для описания процесса производства определенной модели автомобиля на заводе.

![Alt text](./assets/Абстрактная%20фабрика%20~%20Abstract%20Factory%202.png)

В "Абстрактной фабрике" существует четыре основные роли:

- Product (Vehicle): абстрактный продукт;
- Concrete Product (SuperX01): конкретный продукт;
- Factory (VehicleFactory): абстрактная фабрика;
- ConcreteFactory(SuperX01Factory): конкретная фабрика.

### Пример реализации

```ts
abstract class Vehicle {
  abstract run(): void;
}

class SuperX01 extends Vehicle {
  run(): void {
    console.log("SuperX01 start");
  }
}

class SuperX02 extends Vehicle {
  run(): void {
    console.log("SuperX02 start");
  }
}

// 

abstract class SuperXFactory {
  abstract produceSuperX01(): SuperX01;

  abstract produceSuperX02(): SuperX02;
}

// 

class ConcreteSuperXFactory extends SuperXFactory {
  produceSuperX01(): SuperX01 {
    return new SuperX01();
  }

  produceSuperX02(): SuperX02 {
    return new SuperX02();
  }
}

// Using

const superXFactory = new ConcreteSuperXFactory();

const superX01 = superXFactory.produceSuperX01();
const superX02 = superXFactory.produceSuperX02();

superX01.run();
superX02.run();
```


В чем же разница между ним и "Абстрактной фабрикой"?

Основное отличие между "Абстрактной фабрикой" и просто "Фабрикой" заключается в том, что "Фабрика" нацелена на производство уникального (иерархического) продукта. "Абстрактная фабрика" должна иметь возможность производить несколько видов похожих продуктов (это требование должно учитываться уже на уровне структуры класса фабрики).

![Alt text](./assets/Абстрактная%20фабрика%20~%20Abstract%20Factory%203.png)

Проще говоря, когда нам требуется создавать разные типы продуктов, принадлежащих определенной категории, применение "Абстрактной фабрики" вместо обычной позволит упростить код и сделает его более эффективным.
