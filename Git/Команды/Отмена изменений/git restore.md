Команда `git restore` была добавлена в Git версии 2.23.0 и предназначена для восстановления файлов в рабочей директории или индексе (staging area). Она заменяет некоторые устаревшие способы работы с командами `git checkout` и `git reset`, делая процесс более интуитивным и безопасным.

## Основные варианты использования команды

1. **Восстановление файлов в рабочей директории:**
   Если вы внесли изменения в файл в рабочей директории и хотите отменить эти изменения, вернув файл к состоянию, которое было в последнем коммите, используйте команду:

   ```bash
   git restore <file>
   ```

   Например:

   ```bash
   git restore README.md
   ```

   Эта команда восстановит файл `README.md` до состояния, которое было в последнем коммите.

2. **Восстановление файлов в индексе (staging area):**
   Если вы добавили файл в индекс (staging area) с помощью `git add`, но хотите убрать его оттуда, вернув к состоянию рабочей директории, используйте команду:

   ```bash
   git restore --staged <file>
   ```

   Например:

   ```bash
   git restore --staged README.md
   ```

   Эта команда уберет файл `README.md` из индекса, но оставит изменения в рабочей директории.

3. **Восстановление файлов до состояния из определенного коммита:**
   Если вы хотите восстановить файл до состояния, которое было в определенном коммите, используйте команду:

   ```bash
   git restore --source=<commit> <file>
   ```

   Например, чтобы восстановить файл `README.md` до состояния, которое было в коммите с хэшем `abc1234`, выполните:

   ```bash
   git restore --source=abc1234 README.md
   ```

4. **Восстановление всех файлов в рабочей директории:**
   Если вы хотите отменить все изменения в рабочей директории и вернуть все файлы к состоянию последнего коммита, используйте команду:

   ```bash
   git restore .
   ```

   Эта команда восстановит все файлы в текущей директории и её поддиректориях до состояния последнего коммита.

5. **Восстановление всех файлов в индексе:**
   Если вы хотите убрать все файлы из индекса (staging area), вернув их к состоянию рабочей директории, используйте команду:

   ```bash
   git restore --staged .
   ```

   Эта команда уберет все файлы из индекса, но оставит изменения в рабочей директории.

## Примеры использования

- **Отмена изменений в рабочей директории:**

  ```bash
  git restore README.md
  ```

- **Удаление файла из индекса:**

  ```bash
  git restore --staged README.md
  ```

- **Восстановление файла до состояния из определенного коммита:**

  ```bash
  git restore --source=abc1234 README.md
  ```

- **Отмена всех изменений в рабочей директории:**

  ```bash
  git restore .
  ```

- **Удаление всех файлов из индекса:**

  ```bash
  git restore --staged .
  ```

## Важные моменты

- Команда `git restore` не изменяет историю коммитов. Она работает только с рабочим деревом и индексом.
- Если вы хотите полностью отменить изменения в файле, включая удаление его из индекса и рабочей директории, вам нужно будет выполнить обе команды:

  ```bash
  git restore --staged <file>
  git restore <file>
  ```

- Команда `git restore` безопасна в использовании, так как она не удаляет коммиты и не изменяет историю.
