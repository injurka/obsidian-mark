Команда `git revert` используется для отмены изменений, внесенных конкретным коммитом, путем создания нового коммита, который отменяет эти изменения. В отличие от `git reset`, который изменяет историю, `git revert` не удаляет коммиты из истории, а добавляет новый коммит, который отменяет изменения. Это делает `git revert` безопасным инструментом для работы с общими репозиториями, где изменение истории может вызвать проблемы.

## Основные варианты использования команды

1. **Отмена конкретного коммита:**
   Чтобы отменить изменения, внесенные конкретным коммитом, используй команду:

   ```bash
   git revert <commit>
   ```

   Например, чтобы отменить коммит с хэшем `abc1234`:

   ```bash
   git revert abc1234
   ```

   Git создаст новый коммит, который отменяет изменения, внесенные коммитом `abc1234`.

2. **Отмена нескольких коммитов:**
   Если нужно отменить несколько коммитов, можно указать диапазон коммитов:

   ```bash
   git revert <commit1>..<commit2>
   ```

   Например, чтобы отменить все коммиты между `abc1234` и `def5678`:

   ```bash
   git revert abc1234..def5678
   ```

   Git создаст отдельные коммиты для отмены каждого коммита в указанном диапазоне.

3. **Отмена последнего коммита:**
   Чтобы отменить последний коммит, можно использовать относительную ссылку:

   ```bash
   git revert HEAD
   ```

   Эта команда создаст новый коммит, который отменяет изменения, внесенные последним коммитом.

4. **Отмена слияния (merge commit):**
   Если нужно отменить слияние, используй флаг `-m` (от англ. *mainline*):

   ```bash
   git revert -m 1 <merge-commit>
   ```

   Например, чтобы отменить слияние, выполненное в коммите `abc1234`:

   ```bash
   git revert -m 1 abc1234
   ```

   Флаг `-m 1` указывает, что нужно отменить изменения, внесенные первой родительской веткой (обычно это ветка, в которую выполнялось слияние).

## Примеры использования

- **Отмена последнего коммита:**

  ```bash
  git revert HEAD
  ```

- **Отмена конкретного коммита:**

  ```bash
  git revert abc1234
  ```

- **Отмена нескольких коммитов:**

  ```bash
  git revert abc1234..def5678
  ```

- **Отмена слияния:**

  ```bash
  git revert -m 1 abc1234
  ```

## Как работает `git revert`

1. **Создание нового коммита:**
   `git revert` анализирует изменения, внесенные указанным коммитом, и создает новый коммит, который отменяет эти изменения. Например, если коммит добавлял строку в файл, `git revert` удалит эту строку.

2. **Сохранение истории:**
   В отличие от `git reset`, который изменяет историю, `git revert` добавляет новый коммит в историю. Это делает его безопасным для использования в общих репозиториях, где изменение истории может вызвать проблемы.

3. **Интерактивный режим:**
   Если нужно отменить несколько коммитов, Git может открыть текстовый редактор для редактирования сообщений коммитов. Это полезно, если нужно добавить пояснения к отмене.

## Важные моменты

- **Конфликты:**
   Если изменения, которые нужно отменить, конфликтуют с текущим состоянием репозитория, Git попросит разрешить конфликты вручную. После разрешения конфликтов нужно завершить процесс с помощью `git revert --continue`.

- **Отмена отмены:**
   Если нужно отменить коммит, созданный `git revert`, можно просто выполнить `git revert` для этого коммита. Это вернет изменения, которые были отменены.

- **Безопасность:**
   `git revert` не изменяет историю, поэтому его можно безопасно использовать в общих репозиториях. Это особенно полезно, если нужно отменить изменения, которые уже были отправлены в удаленный репозиторий.

## Пример сценария

1. Вы сделали коммит, который добавил строку в файл `example.txt`:

   ```bash
   echo "Новая строка" >> example.txt
   git add example.txt
   git commit -m "Добавлена новая строка"
   ```

2. Позже вы понимаете, что эта строка была добавлена по ошибке, и хотите отменить изменения. Используешь `git revert`:

   ```bash
   git revert HEAD
   ```

3. Git создаст новый коммит, который удалит строку из файла `example.txt`. История будет выглядеть так:

   ```
   commit 1: Добавлена новая строка
   commit 2: Revert "Добавлена новая строка"
   ```

Теперь файл `example.txt` вернулся к состоянию до добавления строки, а история изменений осталась нетронутой.