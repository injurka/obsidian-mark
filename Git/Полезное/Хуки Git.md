Хуки Git — это скрипты, которые автоматически выполняются при определённых событиях в Git. Они позволяют автоматизировать задачи, такие как проверка кода, запуск тестов или отправка уведомлений, перед или после выполнения команд Git. Хуки находятся в папке `.git/hooks` внутри репозитория.

## Типы хуков

Хуки делятся на две категории:
1. **Клиентские хуки** — выполняются на стороне разработчика (например, перед коммитом или после слияния).
2. **Серверные хуки** — выполняются на стороне сервера (например, при получении изменений или перед обновлением ветки).

## Клиентские хуки

### 1. pre-commit
   - **Когда выполняется**: Перед созданием коммита.
   - **Для чего используется**: Проверка кода, запуск тестов, проверка стиля.
   - **Пример**:
     ```bash
     #!/bin/sh
     # Запуск линтера перед коммитом
     npm run lint
     if [ $? -ne 0 ]; then
       echo "Линтинг не пройден. Коммит отменён."
       exit 1
     fi
     ```

### 2. commit-msg
   - **Когда выполняется**: После ввода сообщения коммита, но перед его созданием.
   - **Для чего используется**: Проверка формата сообщения коммита.
   - **Пример**:
     ```bash
     #!/bin/sh
     # Проверка, что сообщение коммита начинается с JIRA-тикета
     if ! grep -qE '^[A-Z]+-[0-9]+' "$1"; then
       echo "Сообщение коммита должно начинаться с JIRA-тикета (например, PROJ-123)."
       exit 1
     fi
     ```

### 3. pre-push
   - **Когда выполняется**: Перед отправкой изменений на удалённый репозиторий.
   - **Для чего используется**: Запуск тестов или проверка, что ветка готова к отправке.
   - **Пример**:
     ```bash
     #!/bin/sh
     # Запуск тестов перед отправкой изменений
     npm test
     if [ $? -ne 0 ]; then
       echo "Тесты не пройдены. Отправка отменена."
       exit 1
     fi
     ```

### 4. post-commit
   - **Когда выполняется**: После создания коммита.
   - **Для чего используется**: Отправка уведомлений или логирование.
   - **Пример**:
     ```bash
     #!/bin/sh
     # Логирование коммита
     echo "Коммит создан: $(git log -1 --pretty=%B)" >> .git/commit_log.txt
     ```

## Серверные хуки

#### 1. pre-receive
   - **Когда выполняется**: При получении изменений на сервере.
   - **Для чего используется**: Проверка изменений перед их применением.
   - **Пример**:
     ```bash
     #!/bin/sh
     # Проверка, что изменения не содержат запрещённых файлов
     while read oldrev newrev refname; do
       if git diff --name-only $oldrev $newrev | grep -q 'secrets.txt'; then
         echo "Обнаружен запрещённый файл 'secrets.txt'. Отклонено."
         exit 1
       fi
     done
     ```

### 2. update
   - **Когда выполняется**: Перед обновлением каждой ветки на сервере.
   - **Для чего используется**: Проверка изменений для конкретной ветки.
   - **Пример**:
     ```bash
     #!/bin/sh
     # Проверка, что изменения в ветке соответствуют правилам
     if [ "$refname" = "refs/heads/main" ]; then
       echo "Изменения в main запрещены. Используйте pull request."
       exit 1
     fi
     ```

### 3. post-receive
   - **Когда выполняется**: После применения изменений на сервере.
   - **Для чего используется**: Отправка уведомлений или запуск деплоя.
   - **Пример**:
     ```bash
     #!/bin/sh
     # Автоматический деплой после получения изменений
     cd /path/to/project
     git pull origin main
     npm install
     npm run build
     ```

## Как создать хук

1. Перейди в папку `.git/hooks`:
   ```bash
   cd .git/hooks
   ```

2. Создай файл с именем хука (например, `pre-commit`):
   ```bash
   touch pre-commit
   ```

3. Сделай файл исполняемым:
   ```bash
   chmod +x pre-commit
   ```

4. Добавь скрипт в файл. Например:
   ```bash
   #!/bin/sh
   echo "Запуск pre-commit хука..."
   npm run lint
   ```

## Советы
- Хуки не копируются при клонировании репозитория. Чтобы поделиться хуками с командой, можно хранить их в отдельной папке (например, `hooks/`) и использовать инструменты вроде `husky` для их автоматической установки.
- Если хук возвращает ненулевой код выхода (например, `exit 1`), Git прерывает выполнение текущей операции.
- Для сложных хуков можно использовать любые языки программирования (например, Python, Ruby, Node.js).