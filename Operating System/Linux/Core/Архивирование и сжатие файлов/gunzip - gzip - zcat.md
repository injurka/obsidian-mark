`gzip`, `gunzip`, `zcat` - сжать или распаковать файлы
## Cинтаксис

```bash
gzip [ -acdfhlLnNrtvV19 ] [ -S суффикс ] [ файл ... ]
gunzip [ -acfhlLnNrtvV ] [ -S суффикс ] [ файл ... ]
zcat [ -fhLV ] [ файл ... ]
```

## Описание

_Gzip_ уменьшает размер перечисленных файлов, используя кодирование Лемпеля-Зива (LZ77). Там, где это возможно, каждый файл заменяется архивом с расширением **.gz**, с таким же владельцем, временем доступа и модификации. (Расширение по умолчанию - **gz** для VMS, **z** для MSDOS, OS/2 FAT, Windows NT FAT и Atari). Если не указано ни одного файла, или как имя файла указан "-", то стандартный поток ввода сжимается в стандартный поток вывода. _Gzip_ будет пытаться сжать только обычные файлы. В частности, он проигнорирует символические ссылки.

Если имя сжатого файла слишком длинное для файловой системы, где он находится, _gzip_ урезает его. _Gzip_ пытается укоротить только те части имени файла, которые длиннее 3 символов (на части файл разбивается точкой). Если имя файла состоит только из коротких частей, укорачиваются только самые длинные части. Например, если имя файла ограничено 14-ю символами, gzip.msdos.exe сжимается в gzi.msd.exe.gz. Имена не укорачиваются на файловых системах не имеющих ограничения по длине имени файла.

По умолчанию _gzip_ сохраняет в сжатом файле его оригинальное имя и временную метку. Это нужно для разархивирования файла с опцией **-N**. Она используется, если имя сжатого файла было усечено или временная метка при перемещении файла не сохранилось.

Сжатые файлы могут быть восстановлены в первоначальное состояние командой _gzip -d_ или _gunzip_ или _zcat_. Если первоначальное имя файла, сохранённое в архиве, не допускается файловой системой, в которой он находится, то ему создаётся новое имя из первоначального по правилам этой системы.

_gunzip_ берёт список файлов из командной строки и заменяет каждый файл с расширением .gz, -gz, .z, -z, _z или .Z и начинающийся правильным заголовком разархивированным файлом без этого расширения. _gunzip_ также распознаёт специальные расширения **.tgz** и **.taz** как сокращения от **.tar.gz** и **.tar.Z** соответственно. Сжимая файл, _gzip_ по необходимости использует расширение **.tgz** вместо усечения имени у файла с расширением **.tar**.

_gunzip_ на данный момент может распаковывать архивы, созданные _gzip_, _zip_, _compress_, _compress -H_ или _pack_. Распознавание формата архива автоматическое. Используя первые два формата, _gunzip_ проверяет 32-битный CRC. Для формата _pack gunzip_ проверяет длину разархивированного файла. Стандартный формат _compress_ не был рассчитан на возможность проверки целостности архива. Тем не менее, _gunzip_ в некоторых ситуациях может распознать повреждённый .Z-файл. Если вы получаете сообщение об ошибке в процессе распаковки .Z-файла, не думайте, что он не повреждён, если стандартный _uncompress_ на него не жалуется. Это обычно происходит из-за того, что _uncompress_ не проверяет целостность архива и достаёт из него только кучу мусора. На системе SCO формат compress -H (алгоритм lzh) не использует CRC, но также допускает некоторые проверки на целостность.

Файлы, сжатые _zip_-ом, могут быть распакованы gzip-ом только если они содержат один файл, сжатый методом 'deflation'. Эта функция предназначена только для целей конвертирования tar.zip-файлов в формат tar.gz. Для распаковки zip-архивов, содержащих несколько файлов, вместо _gunzip_ используйте _unzip_.

_zcat_ идентичен _gunzip_ **-c**. (На некоторых системах _zcat_ может быть установлен как _gzcat_, в целях обеспечения сохранности оригинальной ссылки на _compress_.) _zcat_ распаковывает либо файлы по списку из командной строки, либо со стандартного потока ввода с записью разархивированных данных в стандартный поток вывода. _zcat_ распаковывает файлы с правильным заголовком вне зависимости от того, содержат они суффикс **.gz** или нет.

_Gzip_ использует алгоритм Лемпеля-Зива, применяемый в _zip_ и PKZIP. Получаемая величина сжатия зависит от размеров входных данных и количества повторяющихся байтовых последовательностей. Текстовые данные, такие как исходные коды или просто тексты на английском языке, в среднем сжимаются на 60-70%. Сжатие обычно получается гораздо лучше, чем при использовании алгоритма LZW (используется в _compress_), кодировании Хаффмана (используется в _pack_) или адаптивном кодировании Хаффмана (_compact_).

Сжатие осуществляется всегда, даже если запакованный файл получается немного больше оригинала. В наихудшем случае размер файла увеличивается на несколько байт заголовка gzip, плюс по 5 байт на каждый блок размером 32 Кб, что составляет 0.015% на больших файлах. Обратите внимание, что фактическое число занятых файлом блоков на диске практически никогда не увеличивается. _gzip_ при сжатии/распаковке сохраняет права доступа и временные метки файлов.

## Опции

**-a --ascii**

Режим текста Ascii: символы конца строки конвертируются в стандарт данной системы. Эта опция поддерживается только на некоторых не-Unix системах. В MSDOS последовательность CR LF конвертируется в LF при сжатии, и LF конвертируется в CR LF при распаковке.

**-c --stdout --to-stdout**

Выводить полученный архив в стандартный поток вывода, оставляя оригинальные файлы нетронутыми. Если входных файлов несколько, то вывод состоит из последовательности независимо сжатых файлов. Для получения большего сжатия, объедините вместе все входные файлы перед архивированием.

**-d --decompress --uncompress**

Распаковка.

**-f --force**

Проводить сжатие или распаковку, даже если на файл есть ссылки, такой архив уже существует или сжатые данные читаются или пишутся на терминал. Если входные данные не в формате, поддерживаемом _gzip_ и задан ключ --stdout, то они без изменения копируются в стандартный поток вывода: позвольте _zcat_ действовать как _cat_. Если не указан ключ **-f** и работа не ведётся в фоновом режиме, то _gzip_ просит подтвердить, нужно ли переписывать уже существующий файл.

**-h --help**

Вывод на экран справки и выход.

**-l --list**

Для каждого сжатого файла печатать следующие данные:

  compressed size: размер сжатого файла
  uncompressed size: размер оригинального файла
  ratio: коэффициент сжатия (0.0%, если неизвестен)
  uncompressed_name: имя оригинального файла

Размер несжатого файла выводится как -1 для файлов не в формате gzip, таких как .Z-файлы. Чтобы получить размер несжатого файла в таких случаях, можно использовать команду:
```sh
zcat файл.Z | wc -c
```

В комбинации с ключом --verbose отображаются также следующие данные:

    method: метод сжатия
    crc: 32-битный CRC несжатых данных
    date & time: время создания/изменения несжатого файла

Методы сжатия, поддерживаемые на данный момент: `deflate`, `compress`, `lzh` (compress -H в SCO) и pack. CRC отображается как ffffffff для файлов не в формате `gzip`.

С ключом --name имя оригинального файла, дата и время берутся из самого архива, если присутствуют.

С ключом --verbose также выводятся общий размер и коэффициент сжатия всех файлов, при условии что все размеры известны. С ключом --quiet не показывается заголовок и итоговая часть.

**-L --license**

Показать лицензию _gzip_ и выйти.

**-n --no-name**

При сжатии не сохранять по умолчанию имя исходного файла и временные метки (оригинальное имя всегда сохраняется, если имя архива придётся усечь). При распаковке не восстанавливать имя исходного файла, даже если оно сохранено (только убрать суффикс _gzip_ из имени архива), и не восстанавливать оригинальные временные метки (взять их со сжатого файла). Эта опция при распаковке применяется по умолчанию.

**-N --name**

При сжатии всегда сохранять имя и временные метки исходного файла (используется по умолчанию). При распаковке восстанавливать имя и временные метки исходного файла, если они присутствуют. Эта опция полезна в системах, имеющих ограничение на длину имени файла, или при потере временных меток файла в процессе его перемещения.

**-q --quiet**

Не выводить предупреждения.

**-r --recursive**

Рекурсивно разбирать дерево каталогов. Если в списке из командой строки указан какой-нибудь каталог, _gzip_ зайдёт в него и сожмёт все файлы, в нём находящиеся (или распакует их в случае с _gunzip_).

**-S .суф --suffix .суф**

Использовать суффикс .суф вместо .gz. Может быть задано любое окончание, но суффиксов, отличных от .z и .gz лучше избегать, чтобы не спутать их с другими при переносе файлов на другие системы. Отсутствие суффикса заставляет gunzip пытаться распаковать все указанные файлы вне зависимости от их окончаний, например:
```sh
gunzip -S "" *       (*.* для MSDOS)
```

Предыдущие версии gzip использовали суффикс .z, но в дальнейшем это было изменено, чтобы избежать конфликта с _pack_.(1).

**-t --test**

Тест, проверка целостности сжатого файла.

**-v --verbose**

Подробно. Показывать имя и уменьшения размера в процентах для каждого файла при сжатии или распаковке.

**-V --version**

Версия. Показать номер версии и параметры сборки, затем выйти.

**-# --fast --best**

Управление скоростью сжатия посредством цифры _#_, где **-1** или **--fast** обозначает самый быстрый метод сжатия (хуже сжимается), и **-9** или **--best** обозначает самый медленный (лучшая степень сжатия). Уровень сжатия по умолчанию равен **-6** (хорошее сжатие при средней скорости).

## Расширенное использование

Несколько сжатых файлов можно объединить в один. В этом случае _gunzip_ распакует все файлы одновременно. Например:

```sh
gzip -c файл1  > архив.gz
gzip -c файл2 >> архив.gz
```

и далее

```sh
gunzip -c архив
```

эквивалентно

```sh
cat файл1 файл2
```

В случае повреждения одного из файлов в .gz-архиве, другие могут быть восстановлены (если удалить из архива повреждённый файл). Более высокое сжатие можно получить при архивировании всех файлов одновременно:

```sh
cat файл1 файл2 | gzip > архив.gz
```

сжимает лучше, чем

```sh
gzip -c файл1 файл2 > архив.gz
```

Если вы хотите перепаковать объединённые файлы для достижения большего сжатия, выполните:

```sh
gzip -cd старый_архив.gz | gzip > новый_архив.gz
```

Если в архиве несколько файлов, то размер несжатых данных и CRC, показываемые по ключу --list, относятся только к последнему файлу. Если вам нужен несжатый размер всех файлов, можно использовать:

```sh
gzip -cd архив.gz | wc -c
```

Если вы хотите создать единый архив с множеством файлов так, чтобы их потом можно было извлечь независимо друг от друга, используйте другие архиваторы, такие как tar или zip. GNU tar поддерживает ключ -z, по которому вызывается непосредственно gzip. gzip создан как дополнение к tar-у, а не как замена.

## Источники
- #### [opennet](https://www.opennet.ru/man.shtml?topic=gunzip&category=1&russian=0)